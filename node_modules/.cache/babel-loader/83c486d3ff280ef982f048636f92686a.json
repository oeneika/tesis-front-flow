{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexa\\\\Documents\\\\Tesis-front\\\\StarterKit\\\\src\\\\pages\\\\Camera\\\\index.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as faceapi from \"face-api.js\";\n\nconst ModoCamara = () => {\n  const videoHeight = 300;\n  const videoWidth = 640;\n  const [initializing, setInitizaliting] = useState(false);\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  useEffect(() => {\n    const loadModels = async () => {\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL), faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL)]).then(startVideo);\n    };\n\n    loadModels();\n  }, []);\n\n  const startVideo = () => {\n    navigator.getUserMedia({\n      video: {}\n    }, stream => videoRef.current.srcObject = stream, err => console.log(err));\n  };\n\n  const handleVideoOnPlay = () => {\n    setInterval(async () => {\n      canvasRef.current.innetHTML = faceapi.createCanvasFromMedia(videoRef.current);\n      const displaySize = {\n        width: videoWidth,\n        height: videoHeight\n      };\n      const detections = await faceapi.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\n      canvasRef.current.getContext(\"2d\").clearRect(0, 0, videoWidth, videoHeight);\n      faceapi.draw.drawDetections(canvasRef.current, resizedDetections);\n      faceapi.draw.DrawFaceLandmarks(canvasRef.current, resizedDetections);\n      faceapi.draw.drawFaceExpressions(canvasRef.current, resizedDetections);\n      console.log(detections);\n    }, 1000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  }, \"Modo Camara\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"botones-camara text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-camara-live\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: videoRef,\n    autoPlay: true,\n    muted: true,\n    height: videoHeight,\n    width: videoWidth,\n    onPlay: handleVideoOnPlay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    className: \"position-absolute\",\n    ref: canvasRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-gmail mx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Grabar video\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary mx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Tomar foto\")))))));\n};\n\nexport default ModoCamara;","map":{"version":3,"sources":["C:/Users/alexa/Documents/Tesis-front/StarterKit/src/pages/Camera/index.js"],"names":["React","useState","useEffect","useRef","faceapi","ModoCamara","videoHeight","videoWidth","initializing","setInitizaliting","videoRef","canvasRef","loadModels","MODEL_URL","process","env","PUBLIC_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","then","startVideo","navigator","getUserMedia","video","stream","current","srcObject","err","console","log","handleVideoOnPlay","setInterval","innetHTML","createCanvasFromMedia","displaySize","width","height","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","resizedDetections","resizeResults","getContext","clearRect","draw","drawDetections","DrawFaceLandmarks","drawFaceExpressions"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from \"react\";\r\n\r\nimport * as faceapi from \"face-api.js\";\r\n\r\nconst ModoCamara = () => {\r\n\tconst videoHeight = 300;\r\n\tconst videoWidth = 640;\r\n\tconst [initializing, setInitizaliting] = useState(false);\r\n\tconst videoRef = useRef();\r\n\tconst canvasRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loadModels = async () => {\r\n\t\t\tconst MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n\t\t\tPromise.all([\r\n\t\t\t\tfaceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL),\r\n\t\t\t]).then(startVideo);\r\n\t\t};\r\n\t\tloadModels();\r\n\t}, []);\r\n\r\n\tconst startVideo = () => {\r\n\t\tnavigator.getUserMedia(\r\n\t\t\t{\r\n\t\t\t\tvideo: {},\r\n\t\t\t},\r\n\t\t\t(stream) => (videoRef.current.srcObject = stream),\r\n\t\t\t(err) => console.log(err)\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleVideoOnPlay = () => {\r\n\t\tsetInterval(async () => {\r\n\t\t\tcanvasRef.current.innetHTML = faceapi.createCanvasFromMedia(\r\n\t\t\t\tvideoRef.current\r\n\t\t\t);\r\n\t\t\tconst displaySize = {\r\n\t\t\t\twidth: videoWidth,\r\n\t\t\t\theight: videoHeight,\r\n\t\t\t};\r\n\r\n\t\t\tconst detections = await faceapi\r\n\t\t\t\t.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n\t\t\t\t.withFaceLandmarks()\r\n\t\t\t\t.withFaceExpressions();\r\n\t\t\tconst resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n\t\t\tcanvasRef.current\r\n\t\t\t\t.getContext(\"2d\")\r\n\t\t\t\t.clearRect(0, 0, videoWidth, videoHeight);\r\n\t\t\tfaceapi.draw.drawDetections(canvasRef.current, resizedDetections);\r\n\t\t\tfaceapi.draw.DrawFaceLandmarks(canvasRef.current, resizedDetections);\r\n\t\t\tfaceapi.draw.drawFaceExpressions(canvasRef.current, resizedDetections);\r\n\t\t\tconsole.log(detections);\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"content-wrapper\">\r\n\t\t\t<section className=\"content\">\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<h3>Modo Camara</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"botones-camara text-center\">\r\n\t\t\t\t\t\t\t\t<div className=\"contenedor-camara-live\">\r\n\t\t\t\t\t\t\t\t\t<video\r\n\t\t\t\t\t\t\t\t\t\tref={videoRef}\r\n\t\t\t\t\t\t\t\t\t\tautoPlay\r\n\t\t\t\t\t\t\t\t\t\tmuted\r\n\t\t\t\t\t\t\t\t\t\theight={videoHeight}\r\n\t\t\t\t\t\t\t\t\t\twidth={videoWidth}\r\n\t\t\t\t\t\t\t\t\t\tonPlay={handleVideoOnPlay}></video>\r\n\t\t\t\t\t\t\t\t\t<canvas className=\"position-absolute\" ref={canvasRef} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-gmail mx-2\">Grabar video</button>\r\n\t\t\t\t\t\t\t\t{/* <button className=\"btn btn-gmail mx-2\">Pausar video</button> */}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary mx-2\">Tomar foto</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ModoCamara;\r\n"]},"metadata":{},"sourceType":"module"}