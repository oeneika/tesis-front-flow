{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexa\\\\Documents\\\\Tesis-front\\\\StarterKit\\\\src\\\\pages\\\\Camera\\\\index.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport Webcam from \"react-webcam\";\n\nconst Camera = () => {\n  const videoHeight = 720;\n  const videoWidth = 1280;\n  const [initializing, setInitizaliting] = useState(false);\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const webcamRef = React.useRef(null);\n  const videoConstraints = {\n    width: 1280,\n    height: 720,\n    facingMode: \"user\"\n  };\n  useEffect(() => {\n    const loadModels = async () => {\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL), faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL)]).then(startVideo);\n    };\n\n    loadModels();\n  }, []);\n\n  const startVideo = () => {\n    navigator.getUserMedia({\n      video: {}\n    }, stream => webcamRef.current.srcObject = stream, err => console.log(err));\n  };\n\n  const handleVideoOnPlay = () => {\n    setInterval(async () => {\n      canvasRef.current.innetHTML = faceapi.createCanvasFromMedia(videoRef.current);\n      const displaySize = {\n        width: videoWidth,\n        height: videoHeight\n      };\n      const detections = await faceapi.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\n      canvasRef.current.getContext(\"2d\").clearRect(0, 0, videoWidth, videoHeight);\n      faceapi.draw.drawDetections(canvasRef.current, resizedDetections);\n      faceapi.draw.DrawFaceLandmarks(canvasRef.current, resizedDetections);\n      faceapi.draw.drawFaceExpressions(canvasRef.current, resizedDetections);\n      console.log(detections);\n    }, 1000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 6\n    }\n  }, \"Modo Camara\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"botones-camara text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-camara-live\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Webcam, {\n    ref: webcamRef,\n    width: 1280,\n    videoConstraints: videoConstraints,\n    onPlay: handleVideoOnPlay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-gmail mx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Grabar video\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary mx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"Tomar foto\")))))));\n};\n\nexport default Camera;","map":{"version":3,"sources":["C:/Users/alexa/Documents/Tesis-front/StarterKit/src/pages/Camera/index.js"],"names":["React","useState","useEffect","useRef","faceapi","Webcam","Camera","videoHeight","videoWidth","initializing","setInitizaliting","videoRef","canvasRef","webcamRef","videoConstraints","width","height","facingMode","loadModels","MODEL_URL","process","env","PUBLIC_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","then","startVideo","navigator","getUserMedia","video","stream","current","srcObject","err","console","log","handleVideoOnPlay","setInterval","innetHTML","createCanvasFromMedia","displaySize","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","resizedDetections","resizeResults","getContext","clearRect","draw","drawDetections","DrawFaceLandmarks","drawFaceExpressions"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from \"react\";\r\n\r\nimport * as faceapi from \"face-api.js\";\r\nimport Webcam from \"react-webcam\";\r\n\r\nconst Camera = () => {\r\n\tconst videoHeight = 720;\r\n\tconst videoWidth = 1280;\r\n\tconst [initializing, setInitizaliting] = useState(false);\r\n\tconst videoRef = useRef();\r\n\tconst canvasRef = useRef();\r\n\tconst webcamRef = React.useRef(null);\r\n\r\n\tconst videoConstraints = {\r\n\t\twidth: 1280,\r\n\t\theight: 720,\r\n\t\tfacingMode: \"user\",\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loadModels = async () => {\r\n\t\t\tconst MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n\t\t\tPromise.all([\r\n\t\t\t\tfaceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\r\n\t\t\t\tfaceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL),\r\n\t\t\t]).then(startVideo);\r\n\t\t};\r\n\t\tloadModels();\r\n\t}, []);\r\n\r\n\tconst startVideo = () => {\r\n\t\tnavigator.getUserMedia(\r\n\t\t\t{\r\n\t\t\t\tvideo: {},\r\n\t\t\t},\r\n\t\t\t(stream) => (webcamRef.current.srcObject = stream),\r\n\t\t\t(err) => console.log(err)\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleVideoOnPlay = () => {\r\n\t\tsetInterval(async () => {\r\n\t\t\tcanvasRef.current.innetHTML = faceapi.createCanvasFromMedia(\r\n\t\t\t\tvideoRef.current\r\n\t\t\t);\r\n\t\t\tconst displaySize = {\r\n\t\t\t\twidth: videoWidth,\r\n\t\t\t\theight: videoHeight,\r\n\t\t\t};\r\n\r\n\t\t\tconst detections = await faceapi\r\n\t\t\t\t.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n\t\t\t\t.withFaceLandmarks()\r\n\t\t\t\t.withFaceExpressions();\r\n\t\t\tconst resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n\t\t\tcanvasRef.current\r\n\t\t\t\t.getContext(\"2d\")\r\n\t\t\t\t.clearRect(0, 0, videoWidth, videoHeight);\r\n\t\t\tfaceapi.draw.drawDetections(canvasRef.current, resizedDetections);\r\n\t\t\tfaceapi.draw.DrawFaceLandmarks(canvasRef.current, resizedDetections);\r\n\t\t\tfaceapi.draw.drawFaceExpressions(canvasRef.current, resizedDetections);\r\n\t\t\tconsole.log(detections);\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"content-wrapper\">\r\n\t\t\t<section className=\"content\">\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<h3>Modo Camara</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"botones-camara text-center\">\r\n\t\t\t\t\t\t\t\t<div className=\"contenedor-camara-live\">\r\n\t\t\t\t\t\t\t\t\t<Webcam\r\n\t\t\t\t\t\t\t\t\t\tref={webcamRef}\r\n\t\t\t\t\t\t\t\t\t\twidth={1280}\r\n\t\t\t\t\t\t\t\t\t\tvideoConstraints={videoConstraints}\r\n\t\t\t\t\t\t\t\t\t\tonPlay={handleVideoOnPlay}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-gmail mx-2\">Grabar video</button>\r\n\t\t\t\t\t\t\t\t{/* <button className=\"btn btn-gmail mx-2\">Pausar video</button> */}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary mx-2\">Tomar foto</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Camera;\r\n"]},"metadata":{},"sourceType":"module"}