{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexa\\\\Documents\\\\Tesis-front\\\\StarterKit\\\\src\\\\pages\\\\Camera\\\\index.js\";\nimport React, { useState } from \"react\";\nimport { Container, Row, Col, Card, CardBody, ButtonGroup, Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\"; //Import Breadcrumb\n\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\";\nimport Webcam from \"react-webcam\";\n\nconst Camera = () => {\n  const webcamRef = React.useRef(null);\n  const mediaRecorderRef = React.useRef(null);\n  const [capturing, setCapturing] = React.useState(false);\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\n  const handleStartCaptureClick = React.useCallback(() => {\n    setCapturing(true);\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\n      mimeType: \"video/webm\"\n    });\n    mediaRecorderRef.current.addEventListener(\"dataavailable\", handleDataAvailable);\n    mediaRecorderRef.current.start();\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\n  const handleDataAvailable = React.useCallback(({\n    data\n  }) => {\n    if (data.size > 0) {\n      setRecordedChunks(prev => prev.concat(data));\n    }\n  }, [setRecordedChunks]);\n  const handleStopCaptureClick = React.useCallback(() => {\n    mediaRecorderRef.current.stop();\n    setCapturing(false);\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\n  const handleDownload = React.useCallback(() => {\n    if (recordedChunks.length) {\n      const blob = new Blob(recordedChunks, {\n        type: \"video/webm\"\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      document.body.appendChild(a);\n      a.style = \"display: none\";\n      a.href = url;\n      a.download = \"react-webcam-stream-capture.webm\";\n      a.click();\n      window.URL.revokeObjectURL(url);\n      setRecordedChunks([]);\n    }\n  }, [recordedChunks]);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumbs, {\n    title: \"C\\xE1maras\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xl: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-right d-none d-md-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, capturing ? /*#__PURE__*/React.createElement(Button, {\n    size: \"md\",\n    color: \"light\",\n    type: \"button\",\n    onClick: handleStartCaptureClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"Detener video\") : /*#__PURE__*/React.createElement(Button, {\n    size: \"md\",\n    color: \"light\",\n    type: \"button\",\n    onClick: handleStopCaptureClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"Iniciar video\"), recordedChunks.length > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"Download\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"md\",\n    color: \"light\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 12\n    }\n  }, \"Capturar foto\"))), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 10\n    }\n  }, \"Sala de mi casa\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"embed-responsive embed-responsive-21by9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Webcam, {\n    audio: false,\n    ref: webcamRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  })))))))));\n};\n\nexport default Camera;","map":{"version":3,"sources":["C:/Users/alexa/Documents/Tesis-front/StarterKit/src/pages/Camera/index.js"],"names":["React","useState","Container","Row","Col","Card","CardBody","ButtonGroup","Button","Modal","ModalHeader","ModalBody","ModalFooter","Breadcrumbs","Webcam","Camera","webcamRef","useRef","mediaRecorderRef","capturing","setCapturing","recordedChunks","setRecordedChunks","handleStartCaptureClick","useCallback","current","MediaRecorder","stream","mimeType","addEventListener","handleDataAvailable","start","data","size","prev","concat","handleStopCaptureClick","stop","handleDownload","length","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","body","appendChild","style","href","download","click","window","revokeObjectURL"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport {\r\n\tContainer,\r\n\tRow,\r\n\tCol,\r\n\tCard,\r\n\tCardBody,\r\n\tButtonGroup,\r\n\tButton,\r\n\tModal,\r\n\tModalHeader,\r\n\tModalBody,\r\n\tModalFooter,\r\n} from \"reactstrap\";\r\n//Import Breadcrumb\r\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\";\r\nimport Webcam from \"react-webcam\";\r\n\r\nconst Camera = () => {\r\n\tconst webcamRef = React.useRef(null);\r\n\tconst mediaRecorderRef = React.useRef(null);\r\n\tconst [capturing, setCapturing] = React.useState(false);\r\n\tconst [recordedChunks, setRecordedChunks] = React.useState([]);\r\n\r\n\tconst handleStartCaptureClick = React.useCallback(() => {\r\n\t\tsetCapturing(true);\r\n\t\tmediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\r\n\t\t\tmimeType: \"video/webm\",\r\n\t\t});\r\n\t\tmediaRecorderRef.current.addEventListener(\r\n\t\t\t\"dataavailable\",\r\n\t\t\thandleDataAvailable\r\n\t\t);\r\n\t\tmediaRecorderRef.current.start();\r\n\t}, [webcamRef, setCapturing, mediaRecorderRef]);\r\n\r\n\tconst handleDataAvailable = React.useCallback(\r\n\t\t({data}) => {\r\n\t\t\tif (data.size > 0) {\r\n\t\t\t\tsetRecordedChunks((prev) => prev.concat(data));\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setRecordedChunks]\r\n\t);\r\n\r\n\tconst handleStopCaptureClick = React.useCallback(() => {\r\n\t\tmediaRecorderRef.current.stop();\r\n\t\tsetCapturing(false);\r\n\t}, [mediaRecorderRef, webcamRef, setCapturing]);\r\n\r\n\tconst handleDownload = React.useCallback(() => {\r\n\t\tif (recordedChunks.length) {\r\n\t\t\tconst blob = new Blob(recordedChunks, {\r\n\t\t\t\ttype: \"video/webm\",\r\n\t\t\t});\r\n\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\tconst a = document.createElement(\"a\");\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\ta.href = url;\r\n\t\t\ta.download = \"react-webcam-stream-capture.webm\";\r\n\t\t\ta.click();\r\n\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\tsetRecordedChunks([]);\r\n\t\t}\r\n\t}, [recordedChunks]);\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<div className=\"page-content\">\r\n\t\t\t\t<Container fluid>\r\n\t\t\t\t\t<Breadcrumbs title=\"Cámaras\" />\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col xl=\"12\">\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<CardBody>\r\n\t\t\t\t\t\t\t\t\t<div className=\"float-right d-none d-md-inline-block\">\r\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup className=\"mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{capturing ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"md\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"light\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartCaptureClick}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDetener video\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"md\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"light\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleStopCaptureClick}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tIniciar video\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t{recordedChunks.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={handleDownload}>Download</button>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<Button size=\"md\" color=\"light\" type=\"button\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tCapturar foto\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"card-title mb-4\">Sala de mi casa</h4>\r\n\t\t\t\t\t\t\t\t\t<div className=\"embed-responsive embed-responsive-21by9\">\r\n\t\t\t\t\t\t\t\t\t\t<Webcam audio={false} ref={webcamRef} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</CardBody>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default Camera;\r\n"]},"metadata":{},"sourceType":"module"}